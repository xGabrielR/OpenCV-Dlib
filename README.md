## Opencv Dlib

---

#### 1.0. Project Description

This project has a very simple idea. It basically consists of a camera detecting people's faces using yunet, after that the image is processed so that the embedding is collected with Dlib, and this 128 position embedding vector is stored in a document in Elasticsearch for quick query/similarity of images later.
The idea of ​​using c++ was to test these tools instead of doing it in python.

Requirements:

1. Dlib for dlib encoding net.
2. Opencv for camera recording.
3. Elasticlient for store image encoding.

Elastic Vector:

**Create Index**

curl -H "Content-Type: application/json" -XPUT 127.0.0.1:9200/img_emb -d '{
    "mappings": {
        "properties": {
            "vector": {
                "dims": 128,
                "type": "dense_vector",
                "similarity": "l2_norm"
            }
        }
    }
}'

**Check Index Properties**

curl -H "Content-Type: application/json" -XGET 127.0.0.1:9200/img_emb

**Insert Data on Index**

Generated Vector of Process.

curl -H "Content-Type: application/json" -XPOST 127.0.0.1:9200/img_emb/_doc -d '
    {"vector": [0.25404423475265503, -0.9581334590911865, -0.345427006483078, -0.3680412769317627, 0.042441364377737045, 0.819637656211853, -0.13433541357517242, 0.6371904015541077, 1.2438684701919556, 0.43800774216651917, -1.031816840171814, 0.329963743686676, 1.190558910369873, 0.9857947826385498, -1.0050010681152344, 0.3986404538154602, 0.01904778555035591, -1.3470032215118408, 1.1616703271865845, -0.06738873571157455, -0.322573721408844, 0.4357759952545166, -0.06139502674341202, 0.8959261178970337, 0.7630727887153625, -0.3229064643383026, 1.4687168598175049, 1.2075207233428955, -2.0412843227386475, -0.36797624826431274, 0.6672350168228149, 0.3221277594566345, 0.9298930764198303, 1.4110512733459473, -0.9085854887962341, 0.03403623774647713, 0.4415466785430908, -0.7697057723999023, 0.9685613512992859, -0.7286108732223511, -0.1381240040063858, 1.5042178630828857, -0.28152626752853394, -1.3761242628097534, 0.18478402495384216, -0.8478770852088928, 0.09911233186721802, 0.43860065937042236, -0.4762898087501526, 1.3020830154418945, -1.1080795526504517, 0.4522048830986023, -0.7995957136154175, 0.2536221742630005, 0.7604636549949646, -0.0735221654176712, 0.23483003675937653, -0.3695286810398102, -0.06649624556303024, -0.21197360754013062, 0.9204484224319458, 1.2449171543121338, 0.9181135892868042, 0.7563726902008057, 0.4582616984844208, 0.37613970041275024, -0.869821310043335, 1.2148600816726685, -1.5151968002319336, 0.816403865814209, 0.15540342032909393, 0.5187051296234131, 1.2619438171386719, 0.15559333562850952, -0.9292977452278137, -0.4504016935825348, -0.5643863677978516, -0.6270859837532043, 1.8112998008728027, 0.06882691383361816, -1.0454065799713135, -0.0818137526512146, 1.9836939573287964, 1.34166419506073, 0.13658973574638367, 0.34045302867889404, 2.3773889541625977, 0.2563742399215698, 0.7336715459823608, 0.05738114193081856, -0.030434168875217438, 0.41457676887512207, -0.8803457617759705, 0.2736532688140869, 1.9702677726745605, 0.3631785809993744, -1.0836031436920166, 0.3013613224029541, -1.2688305377960205, 0.9838564395904541, 1.2735021114349365, 1.342192530632019, -1.3198574781417847, -1.343650221824646, -0.09051880985498428, 0.0267941914498806, -1.3946824073791504, 0.13581691682338715, -0.4419383108615875, -1.1950860023498535, -0.021521348506212234, -1.4664647579193115, 0.5357002019882202, 0.7330355644226074, -0.43002817034721375, 0.9264644384384155, -0.5611969232559204, 0.6887164115905762, 0.8122162818908691, -0.9608145952224731, -0.22489650547504425, 1.1471518278121948, 0.42794740200042725, 0.3775639533996582, 1.82559335231781, -1.578486442565918, 1.7173789739608765, -0.9494985938072205]}'


References:

https://github.com/seznam/elasticlient